<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Dashboard | EduTask</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="navbar">
    <div class="logo">üéì EduTask</div>
    <div class="nav-menu">
        <a href="index.html">Beranda</a>
        <a href="dashboar.html" class="active">Dashboard</a>
        <a href="kalender.html">Kalender</a>
        <a href="progres.html">Progres</a>
        <li><a href="tentang.html">tentang</a></li>
        <a href="kontak.html" class="active">Kontak</a>

    </div>
      <a href="#" class="btn-primary">Dinda Aidiyah Ruslan</a>
</div>
</header>

<main class="container">

    <!-- Statistik Ringkas -->
    <section class="stats">
        <div class="card">
            <span>Total Tugas</span>
            <h1 id="total">0</h1>
        </div>
        <div class="card">
            <span>Belum Selesai</span>
            <h1 id="pending" class="orange">0</h1>
        </div>
        <div class="card">
            <span>Selesai</span>
            <h1 id="done" class="green">0</h1>
        </div>
        <div class="add-card" onclick="openModal()">
            <div>+</div>
            <p>Tambah Tugas</p>
        </div>
    </section>

    <!-- List Tugas & Progres -->
    <section class="content">
        <div class="tasks">
            <div class="tasks-header">
                <h2>List Tugas Aktif</h2>
                <select id="filter" onchange="renderTasks()">
                    <option value="all">Semua Mata Kuliah</option>
                </select>
            </div>
            <div id="taskList" class="task-list"></div>
        </div>

        <div class="progress-card">
            <h3>Ringkasan Progres</h3>
            <div class="circle">
                <span id="progressText">0%</span>
            </div>
        </div>
    </section>

</main>

<!-- Modal Tambah Tugas -->
<div class="modal" id="modal">
    <div class="modal-box">
        <h3>Tambah Tugas</h3>
        <input id="title" placeholder="Nama tugas">
        <input id="course" placeholder="Mata kuliah">
        <input type="date" id="deadline">
        <button onclick="addTask()">Simpan</button>
        <button class="close" onclick="closeModal()">Batal</button>
    </div>
</div>

<script>
let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

// Modal
function openModal(){
    document.getElementById('modal').style.display='flex';
}
function closeModal(){
    document.getElementById('modal').style.display='none';
}

// Simpan ke localStorage
function saveTasks(){
    localStorage.setItem('tasks', JSON.stringify(tasks));
}

// Tambah tugas
function addTask(){
    const title = document.getElementById('title').value.trim();
    const course = document.getElementById('course').value.trim();
    const deadline = document.getElementById('deadline').value;

    if(!title || !course || !deadline){
        alert('Isi semua field!');
        return;
    }

    tasks.push({title, course, deadline, done:false});
    saveTasks();
    updateFilterOptions();
    closeModal();
    renderTasks();

    document.getElementById('title').value = '';
    document.getElementById('course').value = '';
    document.getElementById('deadline').value = '';
}

// Render tasks
function renderTasks(){
    const taskList = document.getElementById('taskList');
    taskList.innerHTML = '';

    const filter = document.getElementById('filter').value;
    const filtered = tasks.filter(t => filter === 'all' || t.course === filter);

    filtered.forEach((t, i) => {
        const div = document.createElement('div');
        div.className = 'task-item' + (t.done ? ' done' : '');
        div.innerHTML = `
            <div class="task-left">
                <input type="checkbox" ${t.done ? 'checked' : ''} onchange="toggleTask(${i})">
                <div>
                    <div class="task-title">${t.title}</div>
                    <div class="task-meta">${t.course} - ${t.deadline}</div>
                </div>
            </div>
            <div class="task-right" onclick="deleteTask(${i})">üóëÔ∏è</div>
        `;
        taskList.appendChild(div);
    });

    updateStats();
}

// Toggle selesai
function toggleTask(i){
    tasks[i].done = !tasks[i].done;
    saveTasks();
    renderTasks();
}

// Hapus tugas
function deleteTask(i){
    tasks.splice(i, 1);
    saveTasks();
    updateFilterOptions();
    renderTasks();
}

// Update filter options
function updateFilterOptions(){
    const select = document.getElementById('filter');
    const courses = [...new Set(tasks.map(t => t.course))];
    select.innerHTML =
        `<option value="all">Semua Mata Kuliah</option>` +
        courses.map(c => `<option value="${c}">${c}</option>`).join('');
}

// Update statistik
function updateStats(){
    const total = tasks.length;
    const done = tasks.filter(t => t.done).length;
    const pending = total - done;

    document.getElementById('total').innerText = total;
    document.getElementById('done').innerText = done;
    document.getElementById('pending').innerText = pending;
    document.getElementById('progressText').innerText =
        total ? Math.round(done / total * 100) + '%' : '0%';
}

// Load awal
updateFilterOptions();
renderTasks();
</script>
